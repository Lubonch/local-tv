<div class="folder-selector-container">
  <div class="content">
    <h1 class="title">Local TV</h1>
    <p class="subtitle">Tu canal personal de videos</p>

    @if (!isSupported) {
      <div class="error-box">
        <p>{{ error }}</p>
      </div>
    }

    @if (isSupported) {
      @if (!isLoading && videoCount === 0) {
        <div class="action-box">
          <p class="instruction">Selecciona una carpeta con videos para comenzar</p>
          <button class="select-button" (click)="onSelectFolder()">
            Seleccionar Carpeta
          </button>
        </div>
      }

      @if (isLoading) {
        <div class="loading-box">
          <div class="spinner"></div>
          <p class="loading-text">{{ loadingMessage }}</p>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="loadingProgress"></div>
          </div>
          <p class="progress-percentage">{{ loadingProgress }}%</p>
          <button class="cancel-button" (click)="cancelLoading()">
            Cancelar y seleccionar manualmente
          </button>
        </div>
      }

      @if (error && !isLoading) {
        <div class="error-box">
          <p>{{ error }}</p>
          <button class="retry-button" (click)="onSelectFolder()">
            Intentar de nuevo
          </button>
        </div>
      }

      @if (videoCount > 0 && !isLoading) {
        <div class="success-box">
          <p class="success-message">Se cargaron {{ videoCount }} videos</p>
          <p class="small-text">Iniciando reproducci√≥n...</p>
        </div>
      }
    }
  </div>
</div>
